#!/usr/bin/env php
<?php
//--install composer if not installed
$whichComposerResult = shell_exec("which composer");
$haveGlobalComposer = (empty($whichComposerResult)) ? false : true;
if(!$haveGlobalComposer){
	$haveLocalComposer = file_exists('composer.phar');
}
$haveComposer = $haveGlobalComposer || $haveLocalComposer;
if(!$haveComposer){
	exec('curl -sS https://getcomposer.org/installer | php');
}

//--gather arguments
$arguments = '';
for($i = 1; $i < $argc; ++$i){
	$arguments .= " {$argv[$i]}";
}

//--run composer with arguments
$composerCommand = ($haveGlobalComposer) ? 'composer' : 'php composer.phar';
passthru($composerCommand . $arguments);
